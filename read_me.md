# 국방 경진대회 도전기

### 두 경진대회에 참여하게 된 배경과 목표!

자대배치를 받고나서 얼마 되지 않아 군 장병을 위한 SW AI 역량 강화 교육의 공고문을 보게 되었습니다

교육 안내문에 22년 하반기 중으로 국방 AI 경진대회가 개최된다는것을 알게되어

교육을 들으면서 이를 준비해야겠다고 다짐했고, 두 개의 대회에 모두 도전해보게 되었습니다!

### 프로젝트 1 : 국방 데이터 활용 경진대회

- **프로젝트 한 줄 소개**

  국방 데이터 및 공공 데이터를 활용한 창의적 아이디어를 기획하는 대회입니다.

- **프로젝트의 구성**

  #### **[1] 문제 탐색 및 정의**

  대회의 공고문을 보고난 뒤, 저는 팀원들과 함께 "**군인이 복무중에 직면할 수 있는 문제는 무엇이며, 발견한 문제가 데이터로 해결 가능한 문제인가?**"를 조사했습니다.

  여러번의 아이디어 회의를 거치면서 다양한 문제들을 찾아내고 정리하던 중, 군인의 피부질환과 관련된 문제가 프로젝트에 적합하다고 판단하여 이를 구체화 하기 시작했습니다.

  좀 더 구체적인 문제 정의를 위해 국가인권위원회의 ['장병 건강권 보장을 위한 군 의료체계 실태조사'](https://www.humanrights.go.kr/site/program/board/basicboard/view?menuid=001004002001&pagesize=10&boardtypeid=16&boardid=7606420)를 참고했습니다.

  육군·해군·공군·해병대 사병 중 의료서비스 이용 경험이 있는 637명을 대상으로 설문조사 한 결과,

  24.8%가 '**진료 또는 검사를 받아볼 필요가 있었지만 제 때 받지 못한 경험이 있었다**'고 답했으며,

  진료, 또는 검사를 받아 볼 필요가 있었으나 제 때 받지 못한 경험의 원인을 복수 응답으로 조사한 결과,

  ‘증상이 가볍거나 시간이 지나면 좋아질 것 같아서.’(46.2%) 가 1위.

  ‘**훈련, 근무 때문에 의료기관에 갈 시간적 여유가 없거나, 근무지를 비울 수 없어서**’(44.9%) 가 2위 였으며,

  ‘**부대 분위기 상 아프다고 말하기 어려워서**’(27.8%)도 높은 수치를 보였습니다.

  특히, 중증이 아닌 피부질환은 발병률은 높은 편이지만, 타 진료과목에 비해 진료를 신청하기에 심리적 부담감이 더하다는 문제가 있었으며, 이는 의료서비스 접근성이 낮은 전방부대일수록 심화된다는 것을 알 수 있었습니다.

  따라서, 저는 "**피부질환 데이터를 통해 스마트폰을 통해서도 피부질환을 진단**할 수 있다면 좋지 않을까?" 라는 주제로 아이디어를 구체화하였습니다.

  단순한 피부질환 진단AI 만으로는 뭔가 부족하다고 생각하여 이전에 간단한 하이브리드 추천시스템을 구현해본 경험을 살려보기로 했고,

  '남성 그루밍 트렌드 리포트 2022' 를 참고하여 남성들의 피부관리 관심도 및 화장품 이용률 상승의 트렌드에 맞춰 **개인의 피부 상태 및 화장품 성분에 따른 화장품과 관리법을 추천하는 시스템**을 고안해보았습니다.

  #### **[2] 데이터로 해결이 가능한 문제인지 파악**

  **[중급] 인공지능 활용**을 수강한 뒤 받은 책인 '**파이썬 라이브러리를 활용한 머신러닝**' 에서 충분한 데이터가 딥러닝 모델들의 핵심이라는 내용을 통해

  제가 고안한 아이디어가 과연 현재 공개된 데이터로 해결이 가능한 문제인가를 찾아보았으며, 적합한 데이터가 존재하는지 조사해보았습니다.

  조사결과, AI-Hub에 공개되어있는 32종의 피부질환에 대한 6만 7천장 이상의 사진 데이터로 구축된 **'피부질환 진단 의료 이미지'** 데이터의 구축활용 가이드라인을 참고하였고, 사용하기에 적합하다고 판단하였습니다.

  또한, 제공된 국방 데이터 중 **국방부 군병원 정보**, **PX 인기상품 정보** 데이터를 각각 **사용자 인근 군병원 정보 제공**과 화장품의 성분과 목적에 따라 **PX에서 구매 가능한 상품을 우선 추천**하기 위해 활용하였습니다.

  #### **[3] 프로젝트 결과**

  직접 구현하는 것이 아닌 아이디어 기획이기에 오히려 실제로 서비스를 구현한다는 가정하에 좀 더 정성을 들여 기획서를 준비했습니다.

  아이디어명은 **Sol-care, 군인을 위한 피부과 전문의**이며, 최종 기획서는 아래와 같습니다.

  운이 좋게도 [**최우수상을 수상하여 국방부 장관상을 수상하게 되었습니다!**](https://gallery2.osam.kr/main/)

- **프로젝트 발전 가능성**

  국방 데이터 활용 경진대회는 국방 데이터를 활용한 창의적인 아이디어와 서비스 개발을 통해 새로운 비지니스 모델과 장병 체감형 서비스를 발굴하기 위해 17년도부터 매년마다 개최하고 있습니다.

  제가 제안한 아이디어가 추후 실제 사업및 서비스로 이어질지에 대해서는 100% 자신은 없지만,

  실현이 불가능한 기획이 아니었기에 심사위원분들께서 좋게 봐주셨고, 좋은 결과를 받을 수 있었다고 생각합니다 :)

- **프로젝트 후기**

  결과물이 코드가 아닌 아이디어 기획이다 보니 SW AI 역량 강화 교육에서 배운 많은 내용들을 실제로 적용할 기회가 없어서 아쉬웠습니다.

  그러나, 데이터를 기반으로 한 서비스 기획의 전반적인 프로세스를 경험해볼 수 있는 신선한 경험이었습니다

### 프로젝트 2 : 국방 AI 경진대회

- **프로젝트 한줄 소개**

  군 장병 및 일반인 대상으로 AI 기술을 활용한 문제 해결. 군 AI 역량을 검증하고 AI 우수 인재를 발굴하는 대회입니다!

- **프로젝트가 어떤식으로 구성되어 있는지**

  ### **[1] 참가자 선발(코딩 테스트)**

  AI/SW 교육을 신청한 목표 중 하나인 **국방 AI 경진대회**에 신청하였습니다.

  예상과는 달리, 참가자 선발 과정인 코딩 테스트가 있다고 공지가 올라와서 부랴부랴 코딩테스트를 준비하게 되었습니다.

  문제는 총 3문제로 구성되어있었으며, 프로그래머스 LV.2 ~ 4의 수준으로 구성되어 있었습니다.

  1번 2번은 조금 고민을 하면 풀만한 문제로 구성되어 있어 모두 만점을 받았지만, 

  3번 문제의 경우는 아직 제 수준으로는 풀기에 어려운 문제였습니다.

  좀 어렵긴 했지만 최종점수 203.2점으로 참가자로 선발되었습니다.

  ### **[2] 예선**

  예선 진출 전 팀 빌딩을 통해 팀을 구성하였고, 팀명은 다같이 해군호텔에서 예선에 참가하였기에

  **해군호텔 602호**로 정했습니다

  

  예선 문제는 다음과 같습니다.

  > 항공 이미지 데이터를 활용한 건물 변화 탐지
  >
  > 이미지 영역 | 항공 이미지 데이터를 활용한 건물 변화 탐지 | mIoU
  >
  > **문제 정의**
  >
  > 전후 이미지를 비교하여 건물 변화를 탐지 및 분할하는 문제

  경진대회용 데이터는 AI-Hub에 동일한 데이터셋인 **항공영상 도시건물 변화탐지 데이터**를 활용하였습니다.

  보통 Change Detection 분야는 binary로 분류하는 경우가 많지만, 이번 대회의 경우에는 

  > \- Mask 인코딩 설명
  >
  > --- Pixel 별로 Background는 0, 신축은 1, 소멸은 2, 갱신은 3으로 인코딩되어 있음
  >
  > --- Background (Pixel Value 0) : 신축, 소멸, 갱신 중 어느것에도 해당되지 않는 경우
  >
  > --- 신축 (Pixel Value 1) : 왼쪽 대비 오른쪽 사진에 건물이 생성된 경우
  >
  > --- 소멸 (Pixel Value 2): 왼쪽 대비 오른쪽 사진에서 건물이 붕괴되어 없는 경우
  >
  > --- 갱신 (Pixel Value 3): 양쪽 같은 위치에 건물이 있으면서 한쪽에 변화가 있는 경우

  위와같이 multiclass semantic segmentation 과제로 주어졌습니다.

  평가지표는  **mIoU (mean Intersection over Union)**이고, 전체 테스트 데이터셋을 3:7 비율의public:private으로 나눠 예선 기간동안은 public 점수를 리더보드에 게시하는 형태였습니다.

  

  예선 기간동안 저희팀이 접근한 방법론을 정리하였습니다.

  안타깝게도 예선기간동안 재현성검증을 위해 개발한 코드를 주최측이 제공한 서버에만 저장해둬서 예선이 끝난 지금은 접근할수가 없어 최대한 유사하게 기록을 남겼습니다.

  

  먼저 train으로 주어진 데이터는 총 12,000개였으며, mask 간의 imbalance가 심한 데이터셋이었습니다.

  효과적인 모델 개발을 위해 CV를 위한 데이터 전처리 프로세스의 정석대로 진행하였습니다.

  학습에 불필요한 데이터를 제거하였고, data augmentation 과정을 거쳤습니다.

  

  주최측에서 제공한 Baseline 코드는 [segmentation-models-pytorch](https://github.com/qubvel/segmentation_models.pytorch)를 기반으로 제공되었습니다.

  베이스라인 코드를 사용하면서, ensemble을 위한 다른 모델을 채택할 필요가 있었고,

  SMP(segmentation models pytorch) 를 기반으로 Change Detection을 위해 개발한  [change_detection.pytorch](https://github.com/likyoo/change_detection.pytorch)를 사용하였습니다.

  

  베이스라인코드와 CDP(change_detection.pytorch)는 데이터의 Input 형태가 다르기에, 두가지 트랙으로 데이터를 구조화 한 뒤 학습하는 과정을 거쳤습니다.

  

  ##### 1)Baseline

  SMP가 지원하는 아키텍쳐는 다음과 같습니다.

  - Unet [[paper](https://arxiv.org/abs/1505.04597)] [[docs](https://smp.readthedocs.io/en/latest/models.html#unet)]
  - Unet++ [[paper](https://arxiv.org/pdf/1807.10165.pdf)] [[docs](https://smp.readthedocs.io/en/latest/models.html#id2)]
  - MAnet [[paper](https://ieeexplore.ieee.org/abstract/document/9201310)] [[docs](https://smp.readthedocs.io/en/latest/models.html#manet)]
  - Linknet [[paper](https://arxiv.org/abs/1707.03718)] [[docs](https://smp.readthedocs.io/en/latest/models.html#linknet)]
  - FPN [[paper](http://presentations.cocodataset.org/COCO17-Stuff-FAIR.pdf)] [[docs](https://smp.readthedocs.io/en/latest/models.html#fpn)]
  - PSPNet [[paper](https://arxiv.org/abs/1612.01105)] [[docs](https://smp.readthedocs.io/en/latest/models.html#pspnet)]
  - PAN [[paper](https://arxiv.org/abs/1805.10180)] [[docs](https://smp.readthedocs.io/en/latest/models.html#pan)]
  - DeepLabV3 [[paper](https://arxiv.org/abs/1706.05587)] [[docs](https://smp.readthedocs.io/en/latest/models.html#deeplabv3)]
  - DeepLabV3+ [[paper](https://arxiv.org/abs/1802.02611)] [[docs](https://smp.readthedocs.io/en/latest/models.html#id9)]

  저희팀은 다양한 모델 중 DeepLabV3+가 주어진 과제에 가장 적합하다고 판단하여 채택했습니다.

  또한, Encoder에 사용되는 모델로는 유명한 EfficientNet보다 더 빠르고 성능이 좋은 RegNetx를 채택하였습니다.

  데이터의 Input 형태는 AI-Hub에 공개된 원본 데이터의 형식대로  (1508,754)픽셀로 구성되어 중심을 기준으로 과거 현재로 구분된 이미지 데이터를 resizing하여 사용하였습니다.

   Augmentation 과정은 중심을 기준으로 과거/현재 로 구분된 데이터의 특수성을 고려하여 vertical Flip 및 brightness 조절 과정만을 거쳤습니다.

  

  **2)Change Detection Pytorch**

  ChangeFormer의 경우에는 전/후 로 구성된 두개의 입력 이미지를 받으며, Ouput은 predict된 mask를 반환하게 됩니다.

  따라서, 주어진 데이터셋을 (754, 754) 픽셀의 두 이미지로 자르는 과정을 거쳐야 했습니다.

  이후, 주어진 서버에서 주어진 문제에 맞춰 학습을 하기 위해 코드의 일정 부분을 수정하였습니다.

  

  30epoch , 60epoch의 결과가 가장 좋게 나와 두 모델의 가중치를 저장한 뒤 이후 ensemble에 사용했습니다. 

  

  좀 더 궁금하시면 

  재현성 검증을 위해 남긴 read_me.md를 참고하시면 됩니다! 

  

  치열한 예선 과정을 거쳐 운좋게도 **[최종순위 9위로 본선에 진출하게 되었습니다!](https://aiconnect.kr/competition/detail/214)**

  지금은 팀원들과 본선을 준비하고 있습니다!

  

- **프로젝트 후기**

  SW AI 역량 강화 교육을 처음 신청할 때 다짐했던 목표를 초과 달성한 것 같아 기분이 정말 좋습니다.

  아직 본선 대회가 남아있고, 다른 참가자들이 다들 잘하시는 분들인 것 같아 걱정이 많지만

  교육을 들으면서 배운 기초 지식을 바탕으로 열심히 공부하고 있고, 최선을 다해 준비하고 있어

  결과에 상관없이 저에겐 너무나도 값진 시간이라고 생각합니다.

  교육을 듣고계시는 다른 수강생 분들도 마지막까지 힘내시고 각자의 목표를 성취하셨으면 좋겠습니다!